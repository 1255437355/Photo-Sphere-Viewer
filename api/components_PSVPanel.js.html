<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>components/PSVPanel.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="PhotoSphereViewer.html">PhotoSphereViewer</a><ul class='methods'><li data-type='method'><a href="PhotoSphereViewer.html#animate">animate</a></li><li data-type='method'><a href="PhotoSphereViewer.html#applyRanges">applyRanges</a></li><li data-type='method'><a href="PhotoSphereViewer.html#cleanPosition">cleanPosition</a></li><li data-type='method'><a href="PhotoSphereViewer.html#clearPanoramaCache">clearPanoramaCache</a></li><li data-type='method'><a href="PhotoSphereViewer.html#destroy">destroy</a></li><li data-type='method'><a href="PhotoSphereViewer.html#getPanoramaCache">getPanoramaCache</a></li><li data-type='method'><a href="PhotoSphereViewer.html#getPosition">getPosition</a></li><li data-type='method'><a href="PhotoSphereViewer.html#getSize">getSize</a></li><li data-type='method'><a href="PhotoSphereViewer.html#getZoomLevel">getZoomLevel</a></li><li data-type='method'><a href="PhotoSphereViewer.html#isAutorotateEnabled">isAutorotateEnabled</a></li><li data-type='method'><a href="PhotoSphereViewer.html#isFullscreenEnabled">isFullscreenEnabled</a></li><li data-type='method'><a href="PhotoSphereViewer.html#isGyroscopeEnabled">isGyroscopeEnabled</a></li><li data-type='method'><a href="PhotoSphereViewer.html#load">load</a></li><li data-type='method'><a href="PhotoSphereViewer.html#preloadPanorama">preloadPanorama</a></li><li data-type='method'><a href="PhotoSphereViewer.html#render">render</a></li><li data-type='method'><a href="PhotoSphereViewer.html#rotate">rotate</a></li><li data-type='method'><a href="PhotoSphereViewer.html#setPanorama">setPanorama</a></li><li data-type='method'><a href="PhotoSphereViewer.html#sphericalCoordsToTextureCoords">sphericalCoordsToTextureCoords</a></li><li data-type='method'><a href="PhotoSphereViewer.html#sphericalCoordsToVector3">sphericalCoordsToVector3</a></li><li data-type='method'><a href="PhotoSphereViewer.html#startAutorotate">startAutorotate</a></li><li data-type='method'><a href="PhotoSphereViewer.html#startGyroscopeControl">startGyroscopeControl</a></li><li data-type='method'><a href="PhotoSphereViewer.html#startKeyboardControl">startKeyboardControl</a></li><li data-type='method'><a href="PhotoSphereViewer.html#stopAll">stopAll</a></li><li data-type='method'><a href="PhotoSphereViewer.html#stopAnimation">stopAnimation</a></li><li data-type='method'><a href="PhotoSphereViewer.html#stopAutorotate">stopAutorotate</a></li><li data-type='method'><a href="PhotoSphereViewer.html#stopGyroscopeControl">stopGyroscopeControl</a></li><li data-type='method'><a href="PhotoSphereViewer.html#stopKeyboardControl">stopKeyboardControl</a></li><li data-type='method'><a href="PhotoSphereViewer.html#textureCoordsToSphericalCoords">textureCoordsToSphericalCoords</a></li><li data-type='method'><a href="PhotoSphereViewer.html#toggleAutorotate">toggleAutorotate</a></li><li data-type='method'><a href="PhotoSphereViewer.html#toggleFullscreen">toggleFullscreen</a></li><li data-type='method'><a href="PhotoSphereViewer.html#toggleGyroscopeControl">toggleGyroscopeControl</a></li><li data-type='method'><a href="PhotoSphereViewer.html#vector3ToSphericalCoords">vector3ToSphericalCoords</a></li><li data-type='method'><a href="PhotoSphereViewer.html#vector3ToViewerCoords">vector3ToViewerCoords</a></li><li data-type='method'><a href="PhotoSphereViewer.html#viewerCoordsToVector3">viewerCoordsToVector3</a></li><li data-type='method'><a href="PhotoSphereViewer.html#zoom">zoom</a></li><li data-type='method'><a href="PhotoSphereViewer.html#zoomIn">zoomIn</a></li><li data-type='method'><a href="PhotoSphereViewer.html#zoomOut">zoomOut</a></li></ul></li><li><a href="PSVComponent.html">PSVComponent</a><ul class='methods'><li data-type='method'><a href="PSVComponent.html#create">create</a></li><li data-type='method'><a href="PSVComponent.html#destroy">destroy</a></li><li data-type='method'><a href="PSVComponent.html#hide">hide</a></li><li data-type='method'><a href="PSVComponent.html#show">show</a></li></ul></li><li><a href="PSVError.html">PSVError</a></li><li><a href="PSVHUD.html">PSVHUD</a><ul class='methods'><li data-type='method'><a href="PSVHUD.html#addMarker">addMarker</a></li><li data-type='method'><a href="PSVHUD.html#clearMarkers">clearMarkers</a></li><li data-type='method'><a href="PSVHUD.html#create">create</a></li><li data-type='method'><a href="PSVHUD.html#destroy">destroy</a></li><li data-type='method'><a href="PSVHUD.html#getCurrentMarker">getCurrentMarker</a></li><li data-type='method'><a href="PSVHUD.html#getMarker">getMarker</a></li><li data-type='method'><a href="PSVHUD.html#gotoMarker">gotoMarker</a></li><li data-type='method'><a href="PSVHUD.html#hide">hide</a></li><li data-type='method'><a href="PSVHUD.html#hideMarker">hideMarker</a></li><li data-type='method'><a href="PSVHUD.html#removeMarker">removeMarker</a></li><li data-type='method'><a href="PSVHUD.html#show">show</a></li><li data-type='method'><a href="PSVHUD.html#showMarker">showMarker</a></li><li data-type='method'><a href="PSVHUD.html#toggleMarker">toggleMarker</a></li><li data-type='method'><a href="PSVHUD.html#updateMarker">updateMarker</a></li><li data-type='method'><a href="PSVHUD.html#updatePositions">updatePositions</a></li></ul></li><li><a href="PSVLoader.html">PSVLoader</a><ul class='methods'><li data-type='method'><a href="PSVLoader.html#create">create</a></li><li data-type='method'><a href="PSVLoader.html#destroy">destroy</a></li><li data-type='method'><a href="PSVLoader.html#setProgress">setProgress</a></li></ul></li><li><a href="PSVMarker.html">PSVMarker</a><ul class='methods'><li data-type='method'><a href="PSVMarker.html#.getType">getType</a></li><li data-type='method'><a href="PSVMarker.html#destroy">destroy</a></li><li data-type='method'><a href="PSVMarker.html#isNormal">isNormal</a></li><li data-type='method'><a href="PSVMarker.html#isPolygon">isPolygon</a></li><li data-type='method'><a href="PSVMarker.html#isSvg">isSvg</a></li><li data-type='method'><a href="PSVMarker.html#update">update</a></li></ul></li><li><a href="PSVNavBar.html">PSVNavBar</a><ul class='methods'><li data-type='method'><a href="PSVNavBar.html#create">create</a></li><li data-type='method'><a href="PSVNavBar.html#destroy">destroy</a></li><li data-type='method'><a href="PSVNavBar.html#getNavbarButton">getNavbarButton</a></li><li data-type='method'><a href="PSVNavBar.html#hideNavbar">hideNavbar</a></li><li data-type='method'><a href="PSVNavBar.html#showNavbar">showNavbar</a></li><li data-type='method'><a href="PSVNavBar.html#toggleNavbar">toggleNavbar</a></li></ul></li><li><a href="PSVNavBarAutorotateButton.html">PSVNavBarAutorotateButton</a><ul class='methods'><li data-type='method'><a href="PSVNavBarAutorotateButton.html#create">create</a></li><li data-type='method'><a href="PSVNavBarAutorotateButton.html#destroy">destroy</a></li></ul></li><li><a href="PSVNavBarButton.html">PSVNavBarButton</a><ul class='methods'><li data-type='method'><a href="PSVNavBarButton.html#create">create</a></li><li data-type='method'><a href="PSVNavBarButton.html#disable">disable</a></li><li data-type='method'><a href="PSVNavBarButton.html#enable">enable</a></li><li data-type='method'><a href="PSVNavBarButton.html#setIcon">setIcon</a></li><li data-type='method'><a href="PSVNavBarButton.html#toggleActive">toggleActive</a></li></ul></li><li><a href="PSVNavBarCaption.html">PSVNavBarCaption</a><ul class='methods'><li data-type='method'><a href="PSVNavBarCaption.html#setCaption">setCaption</a></li></ul></li><li><a href="PSVNavBarCustomButton.html">PSVNavBarCustomButton</a><ul class='methods'><li data-type='method'><a href="PSVNavBarCustomButton.html#create">create</a></li><li data-type='method'><a href="PSVNavBarCustomButton.html#destroy">destroy</a></li></ul></li><li><a href="PSVNavBarDownloadButton.html">PSVNavBarDownloadButton</a><ul class='methods'><li data-type='method'><a href="PSVNavBarDownloadButton.html#create">create</a></li></ul></li><li><a href="PSVNavBarFullscreenButton.html">PSVNavBarFullscreenButton</a><ul class='methods'><li data-type='method'><a href="PSVNavBarFullscreenButton.html#create">create</a></li><li data-type='method'><a href="PSVNavBarFullscreenButton.html#destroy">destroy</a></li></ul></li><li><a href="PSVNavBarGyroscopeButton.html">PSVNavBarGyroscopeButton</a><ul class='methods'><li data-type='method'><a href="PSVNavBarGyroscopeButton.html#create">create</a></li><li data-type='method'><a href="PSVNavBarGyroscopeButton.html#destroy">destroy</a></li></ul></li><li><a href="PSVNavBarMarkersButton.html">PSVNavBarMarkersButton</a><ul class='methods'><li data-type='method'><a href="PSVNavBarMarkersButton.html#create">create</a></li><li data-type='method'><a href="PSVNavBarMarkersButton.html#destroy">destroy</a></li><li data-type='method'><a href="PSVNavBarMarkersButton.html#hideMarkersList">hideMarkersList</a></li><li data-type='method'><a href="PSVNavBarMarkersButton.html#showMarkersList">showMarkersList</a></li><li data-type='method'><a href="PSVNavBarMarkersButton.html#toggleMarkersList">toggleMarkersList</a></li></ul></li><li><a href="PSVNavBarSpacer.html">PSVNavBarSpacer</a></li><li><a href="PSVNavBarZoomButton.html">PSVNavBarZoomButton</a><ul class='methods'><li data-type='method'><a href="PSVNavBarZoomButton.html#create">create</a></li><li data-type='method'><a href="PSVNavBarZoomButton.html#destroy">destroy</a></li></ul></li><li><a href="PSVPanel.html">PSVPanel</a><ul class='methods'><li data-type='method'><a href="PSVPanel.html#create">create</a></li><li data-type='method'><a href="PSVPanel.html#destroy">destroy</a></li><li data-type='method'><a href="PSVPanel.html#hidePanel">hidePanel</a></li><li data-type='method'><a href="PSVPanel.html#showPanel">showPanel</a></li></ul></li><li><a href="PSVTooltip.html">PSVTooltip</a><ul class='methods'><li data-type='method'><a href="PSVTooltip.html#create">create</a></li><li data-type='method'><a href="PSVTooltip.html#destroy">destroy</a></li><li data-type='method'><a href="PSVTooltip.html#hideTooltip">hideTooltip</a></li><li data-type='method'><a href="PSVTooltip.html#isTooltipVisible">isTooltipVisible</a></li><li data-type='method'><a href="PSVTooltip.html#showTooltip">showTooltip</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="PSVUtils.html">PSVUtils</a><ul class='methods'><li data-type='method'><a href="PSVUtils.html#.addClasses">addClasses</a></li><li data-type='method'><a href="PSVUtils.html#.animation">animation</a></li><li data-type='method'><a href="PSVUtils.html#.bound">bound</a></li><li data-type='method'><a href="PSVUtils.html#.checkTHREE">checkTHREE</a></li><li data-type='method'><a href="PSVUtils.html#.clone">clone</a></li><li data-type='method'><a href="PSVUtils.html#.deepmerge">deepmerge</a></li><li data-type='method'><a href="PSVUtils.html#.exitFullscreen">exitFullscreen</a></li><li data-type='method'><a href="PSVUtils.html#.fullscreenEvent">fullscreenEvent</a></li><li data-type='method'><a href="PSVUtils.html#.getClosest">getClosest</a></li><li data-type='method'><a href="PSVUtils.html#.getMaxTextureWidth">getMaxTextureWidth</a></li><li data-type='method'><a href="PSVUtils.html#.getShortestArc">getShortestArc</a></li><li data-type='method'><a href="PSVUtils.html#.getStyle">getStyle</a></li><li data-type='method'><a href="PSVUtils.html#.getWebGLCtx">getWebGLCtx</a></li><li data-type='method'><a href="PSVUtils.html#.getXMPValue">getXMPValue</a></li><li data-type='method'><a href="PSVUtils.html#.hasParent">hasParent</a></li><li data-type='method'><a href="PSVUtils.html#.isCanvasSupported">isCanvasSupported</a></li><li data-type='method'><a href="PSVUtils.html#.isFullscreenEnabled">isFullscreenEnabled</a></li><li data-type='method'><a href="PSVUtils.html#.isPlainObject">isPlainObject</a></li><li data-type='method'><a href="PSVUtils.html#.isWebGLSupported">isWebGLSupported</a></li><li data-type='method'><a href="PSVUtils.html#.mouseWheelEvent">mouseWheelEvent</a></li><li data-type='method'><a href="PSVUtils.html#.parseAngle">parseAngle</a></li><li data-type='method'><a href="PSVUtils.html#.parsePosition">parsePosition</a></li><li data-type='method'><a href="PSVUtils.html#.parseSpeed">parseSpeed</a></li><li data-type='method'><a href="PSVUtils.html#.removeClasses">removeClasses</a></li><li data-type='method'><a href="PSVUtils.html#.requestFullscreen">requestFullscreen</a></li><li data-type='method'><a href="PSVUtils.html#.throttle">throttle</a></li><li data-type='method'><a href="PSVUtils.html#.toggleClass">toggleClass</a></li></ul></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<div id="main">
    
    <h1 class="page-title">components/PSVPanel.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Panel class
 * @param {PhotoSphereViewer} psv
 * @constructor
 */
function PSVPanel(psv) {
  PSVComponent.call(this, psv);

  /**
   * Content container
   * @member {HTMLElement}
   * @readonly
   */
  this.content = null;

  /**
   * @member {Object}
   * @private
   */
  this.prop = {
    mouse_x: 0,
    mouse_y: 0,
    mousedown: false,
    opened: false
  };

  this.create();
}

PSVPanel.prototype = Object.create(PSVComponent.prototype);
PSVPanel.prototype.constructor = PSVPanel;

PSVPanel.className = 'psv-panel';
PSVPanel.publicMethods = ['showPanel', 'hidePanel'];

/**
 * Creates the panel
 */
PSVPanel.prototype.create = function() {
  PSVComponent.prototype.create.call(this);

  this.container.innerHTML =
    '&lt;div class="psv-panel-resizer">&lt;/div>' +
    '&lt;div class="psv-panel-close-button">&lt;/div>' +
    '&lt;div class="psv-panel-content">&lt;/div>';

  this.content = this.container.querySelector('.psv-panel-content');

  var closeBtn = this.container.querySelector('.psv-panel-close-button');
  closeBtn.addEventListener('click', this.hidePanel.bind(this));

  // Stop event bubling from panel
  if (this.psv.config.mousewheel) {
    this.container.addEventListener(PhotoSphereViewer.SYSTEM.mouseWheelEvent, function(e) {
      e.stopPropagation();
    });
  }

  // Event for panel resizing + stop bubling
  var resizer = this.container.querySelector('.psv-panel-resizer');
  resizer.addEventListener('mousedown', this);
  resizer.addEventListener('touchstart', this);
  this.psv.container.addEventListener('mouseup', this);
  this.psv.container.addEventListener('touchend', this);
  this.psv.container.addEventListener('mousemove', this);
  this.psv.container.addEventListener('touchmove', this);
};

/**
 * Destroys the panel
 */
PSVPanel.prototype.destroy = function() {
  this.psv.container.removeEventListener('mousemove', this);
  this.psv.container.removeEventListener('touchmove', this);
  this.psv.container.removeEventListener('mouseup', this);
  this.psv.container.removeEventListener('touchend', this);

  delete this.prop;
  delete this.content;

  PSVComponent.prototype.destroy.call(this);
};

/**
 * Handles events
 * @param {Event} e
 * @private
 */
PSVPanel.prototype.handleEvent = function(e) {
  switch (e.type) {
    // @formatter:off
    case 'mousedown': this._onMouseDown(e); break;
    case 'touchstart': this._onTouchStart(e); break;
    case 'mousemove': this._onMouseMove(e); break;
    case 'touchmove': this._onTouchMove(e); break;
    case 'mouseup': this._onMouseUp(e); break;
    case 'touchend': this._onMouseUp(e); break;
    // @formatter:on
  }
};

/**
 * Shows the panel
 * @param {string} content
 * @param {boolean} [noMargin=false]
 */
PSVPanel.prototype.showPanel = function(content, noMargin) {
  this.content.innerHTML = content;
  this.content.scrollTop = 0;
  this.container.classList.add('psv-panel--open');

  PSVUtils.toggleClass(this.content, 'psv-panel-content--no-margin', !!noMargin);

  this.prop.opened = true;
  this.psv.trigger('open-panel');
};

/**
 * Hides the panel
 */
PSVPanel.prototype.hidePanel = function() {
  this.content.innerHTML = null;
  this.prop.opened = false;
  this.container.classList.remove('psv-panel--open');
  this.psv.trigger('close-panel');
};

/**
 * Handles mouse down events
 * @param {MouseEvent} evt
 * @private
 */
PSVPanel.prototype._onMouseDown = function(evt) {
  evt.stopPropagation();
  this._startResize(evt);
};

/**
 * Handles touch events
 * @param {TouchEvent} evt
 * @private
 */
PSVPanel.prototype._onTouchStart = function(evt) {
  evt.stopPropagation();
  this._startResize(evt.changedTouches[0]);
};

/**
 * Handles mouse up events
 * @param {MouseEvent} evt
 * @private
 */
PSVPanel.prototype._onMouseUp = function(evt) {
  if (this.prop.mousedown) {
    evt.stopPropagation();
    this.prop.mousedown = false;
    this.content.classList.remove('psv-panel-content--no-interaction');
  }
};

/**
 * Handles mouse move events
 * @param {MouseEvent} evt
 * @private
 */
PSVPanel.prototype._onMouseMove = function(evt) {
  if (this.prop.mousedown) {
    evt.stopPropagation();
    this._resize(evt);
  }
};

/**
 * Handles touch move events
 * @param {TouchEvent} evt
 * @private
 */
PSVPanel.prototype._onTouchMove = function(evt) {
  if (this.prop.mousedown) {
    evt.stopPropagation();
    this._resize(evt.touches[0]);
  }
};

/**
 * Initializes the panel resize
 * @param {MouseEvent|Touch} evt
 * @private
 */
PSVPanel.prototype._startResize = function(evt) {
  this.prop.mouse_x = parseInt(evt.clientX);
  this.prop.mouse_y = parseInt(evt.clientY);
  this.prop.mousedown = true;
  this.content.classList.add('psv-panel-content--no-interaction');
};

/**
 * Resizes the panel
 * @param {MouseEvent|Touch} evt
 * @private
 */
PSVPanel.prototype._resize = function(evt) {
  var x = parseInt(evt.clientX);
  var y = parseInt(evt.clientY);

  this.container.style.width = (this.container.offsetWidth - (x - this.prop.mouse_x)) + 'px';

  this.prop.mouse_x = x;
  this.prop.mouse_y = y;
};
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sun Feb 05 2017 21:12:49 GMT+0100 (Paris, Madrid) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
